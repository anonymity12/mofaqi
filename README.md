# 魔法骑

专为摩托车驾驶员打造的小程序，提供驾驶风景点及危险路段分享、安全驾驶技巧交流、摩托车原理科普，助力用户畅享骑行乐趣、提升驾驶技能、探索机车奥秘 



做一个类似日记的小程序，提供驾驶风景点及危险路段分享、安全驾驶技巧交流、摩托车原理科普。底部栏有4个按钮，分别对应四个页面，第一个页是 风景点分享，第二个页面是 危险路段分享，第三个页面是 安全驾驶技巧交流，第四个页面是 摩托车原理科普。每个页面的布局可以多样化，比如 风景点分享可以是 以 卡片列表 形态（里面包含风景的图片，描述，时间戳，地点），危险路段 可以是地图化的标记，每个标记上有一些额外的文本信息，表明为何危险，比如道路泥泞，有落石。

# 开发计划


1  ） 电子眼是不会改的，电子眼点位设置成永久点位，长期显示；

😊  骑摩托写代码的天天 评论：   这个已经完成✅  ，因为默认所有类型的标记都是这样的永久的。（npc，电子眼，视线不好，路面易滑）


2  ） NPC点位统计时段和报点次数，“老口岸”比如中环锦华路口那一段往往是下午下班前到天蒙蒙黑时查，那么那个时段外图上就显示半透明小NPC图标，那个时段内显示标准NPC图标；中环高外环攀路下桥路段往往是晚上9点以后到凌晨2点以前查酒驾、逮摩托，则其他时段显示半透明小NPC图标，该时段内显示标准图标；以此类推。   

😊  骑摩托写代码的天天 评论：

那就是 需要 程序 实现如下功能： 根据 标记（marker） 的 period 属性（比如21点-02点  期间）可以alpha =1 ,其他时候 marker 的 alpha属性 则为 0.5 ；这要求摩友填入 period 属性； 或者 标记时刻 的前后一个小时； 这个属性应该叫做 【npc出现时段】 ， NPC_show_time

3  ） 所有图标点击后可显示标注详情    

😊  骑摩托写代码的天天 评论：   这个已经完成✅ 


4  ） 统计次数不多的那些临时点位，在一次标注后1天过后由标准图标变成半透明小图标  

😊  骑摩托写代码的天天 评论：

点位 现在没有重叠的，除非是这么交互的：
点击 一个 已有的 点位，进入它的详情页，然后 提供一个 【我也上报此点位】 的按钮。 后台 记录 此点位的 计数值 + 1；同时也要记录 这是 谁 在哪一天 进行了 【我也上报此点位】。  约束条件为： 一个人 一天只能对 已知点位 重复上报一次（免得 乱上报）

4.1 ） 对 上报点位多的摩友 进行 奖励

比如 进入鸣谢榜单，甚至现金奖励，成都线下送个礼物啥的；


5  ） 提供点到点路线规划危险点查询，输入出行时间能显示危险点位


😊 骑摩托写代码的天天 评论：

导航功能太难了，需要算法大佬来；而且不知道 腾讯地图 能不能让你 自主导航，因为它要卖自己的导航功能啊，一年几千的，很贵

# 技术分享

## 作为 markerId 学习大数值极限

JavaScript 安全整数范围： Number.MAX_SAFE_INTEGER = 
9007199254740991

是 JavaScript 中最大的安全整数（2^53 – 1）

https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Number/MAX_SAFE_INTEGER



20240519143022789
9223372036854776000   nodejs: 2**63 

如果 // markerId: Number(new Date().format('yyMMddHHmmssSSS')), // 生成15位数字
则
240519143022789

---

上述问题之背景：

使用当前时间作为地图标记的 markerId，包括年月日时分秒毫秒即可，而且请避免溢出情况

---


